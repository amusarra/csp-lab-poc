<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Quarkus CSP Demo</title>
    <!-- Preload del font: copia i file woff/woff2 in src/main/resources/META-INF/resources/fonts/ -->
    <link rel="preload" href="/fonts/awsone.woff2" as="font" type="font/woff2" crossorigin>
    <style>
    @font-face {
        font-family: 'AWSone';
        src: url('/fonts/awsone.woff2') format('woff2'),
             url('/fonts/awsone.woff') format('woff');
        font-weight: 100 900;
        font-style: normal;
        font-display: swap;
    }

    body {
        font-family: 'AWSone', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    </style>
</head>

<body>
<!-- Nota: posiziona i font in src/main/resources/META-INF/resources/fonts/awsone.woff2 (e .woff) in modo che siano serviti da '/fonts/*' -->
<h1>CSP - Security Demo</h1>
<p>Se la CSP funziona, lo script a seguire non verrà eseguito.</p>

<code>
    alert("XSS Attacco riuscito! Se vedi questo, la CSP è fallita.");
</code>

<script>
    window.addEventListener('load', function () {
        // due requestAnimationFrame garantiscono l'esecuzione dopo il paint
        requestAnimationFrame(function () {
            requestAnimationFrame(function () {
                alert("XSS Attacco riuscito! Se vedi questo, la CSP è fallita.");
            });
        });
    });
</script>

</body>
</html>